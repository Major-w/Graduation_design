{% extends "base.html" %}
{% block content %}
<div class="pusher">
    <div class="ui divider"></div>
    <div class="ui equal width grid" style="margin:5px 0 5px 0;width:70%">
        <div class="row">
            <div class="column">
                <div class="ui container segment">
                    <div class="ui compact menu">
                        <div class="ui simple dropdown item">
                            区域
                            <i class="dropdown icon"></i>
                            <div class="menu" style=" overflow:scroll; width:60px; height:300px;">
                                {% for area in areas%}
                                {%if area_id == area.id%}{%else%}<a href="/bd/new_function?area_id={{area.id}}">{%endif%}
                                <div class="item" id="{{area.id}}">{{area.name}}</div>
                                    </a>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                </div>
                <div class="ui container" id="chart1"></div>
            </div>
        </div>
    </div>

</div>
{% endblock %}
{% block script %}
<script>
    $('#menu').click(function () {
        $('.ui.sidebar').sidebar('toggle');
    });
</script>
<script>
    $('#{{area_id}}').click(function () {
        $('#chart1').highcharts({
            chart: {
                type: 'column'
            },
            credits: {
                enabled: false
            },
            title: {
                text: '{{area_name}}房屋租金分布'
            },
            xAxis: {
                categories: ['租金']
            },
            yAxis: {
                title: {
                    text: '{{area_name}}房屋租金分布数量'
                }
            },
            series: [
                {% if series %}
        {% for serie in series[:-1] %}
        {
            name: '{{serie['name']}}',
                data: [{{serie['data']}}]
        },
        {%endfor%}
        {
            name:'{{series[-1]['name']}}',
                data: [{{series[-1]['data']}}]
        }
        {% endif %}
        ]
    });
    });
</script>
{% endblock %}
